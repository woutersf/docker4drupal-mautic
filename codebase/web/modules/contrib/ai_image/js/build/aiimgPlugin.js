!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CKEditor5=e():(t.CKEditor5=t.CKEditor5||{},t.CKEditor5.aiimgPlugin=e())}(self,(()=>(()=>{var t={"ckeditor5/src/core.js":(t,e,i)=>{t.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(t,e,i)=>{t.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":t=>{"use strict";t.exports=CKEditor5.dll}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};return(()=>{"use strict";i.d(n,{default:()=>l});var t=i("ckeditor5/src/core.js"),e=i("ckeditor5/src/ui.js");class r extends e.View{constructor(e){super(e),this.promptInputView=this._createInput("Generate image for this prompt:"),this.saveButtonView=this._createButton("Submit",t.icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton("Cancel",t.icons.cancel,"ck-button-cancel"),this.cancelButtonView.delegate("execute").to(this,"cancel"),this.childViews=this.createCollection([this.promptInputView,this.saveButtonView,this.cancelButtonView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-openai-completion-form","ck-openai-form"],tabindex:"-1"},children:this.childViews})}_createInput(t){const i=new e.LabeledFieldView(this.locale,e.createLabeledInputText);return i.label=t,i}_createButton(t,i,n){const r=new e.ButtonView;return r.set({label:t,icon:i,tooltip:!0,class:n}),r}render(){super.render(),(0,e.submitHandler)({view:this})}focus(){this.childViews.first.focus()}}class o extends t.Command{constructor(t,i){super(t),this._balloon=this.editor.plugins.get(e.ContextualBalloon),this.formView=this._createFormView(),this._config=i}execute(){this._showUI()}_createFormView(){const t=this.editor,i=new r(t.locale);return this.listenTo(i,"submit",(()=>{const e=i.promptInputView.fieldView.element.value;jQuery("body").addClass("waiting"),t.model.change((i=>{fetch(drupalSettings.path.baseUrl+"api/ai-image/getimage",{method:"POST",credentials:"same-origin",body:JSON.stringify({prompt:e,options:this._config})}).then((t=>t.json())).then((n=>t.model.insertContent(i.createElement("imageBlock",{src:n.text,alt:e})))).then((()=>this._hideUI()))}))})),this.listenTo(i,"cancel",(()=>{this._hideUI()})),(0,e.clickOutsideHandler)({emitter:i,activator:()=>this._balloon.visibleView===i,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()}),i}_getBalloonPositionData(){const t=this.editor.editing.view,e=t.document;let i=null;return i=()=>t.domConverter.viewRangeToDom(e.selection.getFirstRange()),{target:i}}_showUI(){this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.focus()}_hideUI(){this.formView.promptInputView.fieldView.value="",this.formView.element.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),jQuery("body").removeClass("waiting")}_displayLoading(){}}class s extends t.Plugin{init(){const t=this.editor,i=this.editor.config.get("ai_image_aiimg");t.commands.add("insertAiImg",new o(this.editor,i.aiimage)),t.ui.componentFactory.add("aiImg",(i=>{const n=t.commands.get("insertAiImg"),r=new e.ButtonView(i);return r.set({label:t.t("Generate Image by AI"),icon:'<?xml version="1.0" encoding="iso-8859-1"?>\r\n\x3c!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \r\n\t width="800px" height="800px" viewBox="0 0 600.699 600.699"\r\n\t xml:space="preserve">\r\n<g>\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M542.061,83.223H58.64c-32.059,0-58.14,26.082-58.14,58.14v317.973c0,32.059,26.082,58.141,58.14,58.141h483.42\r\n\t\t\t\tc32.059,0,58.139-26.082,58.139-58.141V141.363C600.199,109.304,574.119,83.223,542.061,83.223z M557.359,459.336\r\n\t\t\t\tc0,8.451-6.85,15.301-15.299,15.301H58.64c-8.45,0-15.3-6.85-15.3-15.301V141.363c0-8.451,6.85-15.3,15.3-15.3h483.42\r\n\t\t\t\tc8.449,0,15.299,6.849,15.299,15.3V459.336z"/>\r\n\t\t\t<path d="M542.061,517.977H58.64C26.306,517.977,0,491.671,0,459.336V141.363c0-32.334,26.306-58.64,58.64-58.64h483.42\r\n\t\t\t\tc32.333,0,58.639,26.306,58.639,58.64v317.973C600.699,491.671,574.394,517.977,542.061,517.977z M58.64,83.723\r\n\t\t\t\tC26.857,83.723,1,109.58,1,141.363v317.973c0,31.783,25.857,57.641,57.64,57.641h483.42c31.782,0,57.639-25.857,57.639-57.641\r\n\t\t\t\tV141.363c0-31.783-25.856-57.64-57.639-57.64H58.64z M542.061,475.137H58.64c-8.712,0-15.8-7.088-15.8-15.801V141.363\r\n\t\t\t\tc0-8.712,7.088-15.8,15.8-15.8h483.42c8.712,0,15.799,7.088,15.799,15.8v317.973\r\n\t\t\t\tC557.859,468.049,550.772,475.137,542.061,475.137z M58.64,126.563c-8.161,0-14.8,6.639-14.8,14.8v317.973\r\n\t\t\t\tc0,8.161,6.639,14.801,14.8,14.801h483.42c8.16,0,14.799-6.64,14.799-14.801V141.363c0-8.161-6.639-14.8-14.799-14.8H58.64z"/>\r\n\t\t</g>\r\n\t\t<g>\r\n\t\t\t<path d="M455.209,157.231c-33.867,0-61.42,27.553-61.42,61.421c0,33.868,27.553,61.421,61.42,61.421s61.422-27.553,61.422-61.421\r\n\t\t\t\tS489.076,157.231,455.209,157.231z M455.209,237.233c-10.262,0-18.58-8.319-18.58-18.581c0-10.262,8.318-18.581,18.58-18.581\r\n\t\t\t\ts18.582,8.319,18.582,18.581S465.471,237.233,455.209,237.233z"/>\r\n\t\t\t<path d="M455.209,280.573c-34.143,0-61.92-27.778-61.92-61.921c0-34.143,27.777-61.921,61.92-61.921\r\n\t\t\t\tc34.144,0,61.922,27.778,61.922,61.921C517.131,252.795,489.353,280.573,455.209,280.573z M455.209,157.731\r\n\t\t\t\tc-33.592,0-60.92,27.329-60.92,60.921c0,33.592,27.328,60.921,60.92,60.921c33.593,0,60.922-27.329,60.922-60.921\r\n\t\t\t\tC516.131,185.06,488.802,157.731,455.209,157.731z M455.209,237.733c-10.521,0-19.08-8.56-19.08-19.081\r\n\t\t\t\tc0-10.521,8.56-19.081,19.08-19.081c10.521,0,19.082,8.56,19.082,19.081C474.291,229.173,465.73,237.733,455.209,237.733z\r\n\t\t\t\t M455.209,200.571c-9.97,0-18.08,8.111-18.08,18.081s8.11,18.081,18.08,18.081c9.971,0,18.082-8.111,18.082-18.081\r\n\t\t\t\tS465.18,200.571,455.209,200.571z"/>\r\n\t\t</g>\r\n\t\t<g>\r\n\t\t\t<path d="M383.445,312.971c-5.975-5.975-15.662-5.975-21.637,0l-45.223,45.223l-81.531-81.528c-5.975-5.976-15.663-5.976-21.637,0\r\n\t\t\t\tL84.204,405.877c-5.975,5.977-5.975,15.662,0,21.639l8.656,8.654c5.975,5.975,15.662,5.975,21.637,0l98.921-98.922\r\n\t\t\t\tc5.975-5.975,15.662-5.975,21.637,0l98.921,98.922c5.975,5.977,15.662,5.977,21.637,0l8.656-8.654\r\n\t\t\t\tc5.975-5.977,5.975-15.664,0-21.639l-17.393-17.391l25.75-25.75l74.271,74.273c5.975,5.975,15.662,5.975,21.637,0l8.656-8.656\r\n\t\t\t\tc5.975-5.975,5.975-15.664,0-21.637L383.445,312.971z"/>\r\n\t\t\t<path d="M457.717,441.991c-4.221,0-8.188-1.644-11.172-4.628l-73.918-73.92l-25.043,25.043l17.039,17.037\r\n\t\t\t\tc6.16,6.16,6.16,16.184,0,22.346l-8.656,8.654c-2.984,2.985-6.951,4.629-11.172,4.629s-8.188-1.644-11.172-4.629l-98.921-98.922\r\n\t\t\t\tc-2.795-2.795-6.512-4.334-10.465-4.334s-7.669,1.539-10.465,4.334l-98.921,98.922c-2.984,2.984-6.952,4.628-11.172,4.628\r\n\t\t\t\tc-4.22,0-8.188-1.644-11.172-4.628l-8.656-8.654c-6.159-6.161-6.159-16.185,0-22.346l129.214-129.212\r\n\t\t\t\tc2.984-2.984,6.952-4.628,11.172-4.628s8.188,1.644,11.172,4.628l81.177,81.175l44.869-44.869\r\n\t\t\t\tc2.984-2.984,6.951-4.627,11.172-4.627s8.188,1.643,11.172,4.627l93.746,93.746c2.984,2.983,4.628,6.95,4.628,11.171\r\n\t\t\t\ts-1.644,8.188-4.628,11.173l-8.656,8.656C465.904,440.348,461.938,441.991,457.717,441.991z M372.627,362.029l74.625,74.627\r\n\t\t\t\tc2.795,2.795,6.512,4.335,10.465,4.335s7.67-1.54,10.465-4.335l8.656-8.656c2.795-2.795,4.335-6.512,4.335-10.466\r\n\t\t\t\tc0-3.953-1.54-7.67-4.335-10.464l-93.746-93.746c-2.795-2.795-6.512-4.334-10.465-4.334s-7.67,1.539-10.465,4.334L316.586,358.9\r\n\t\t\t\tl-81.884-81.882c-2.795-2.795-6.512-4.335-10.465-4.335s-7.669,1.54-10.465,4.335L84.557,406.23\r\n\t\t\t\tc-5.769,5.771-5.769,15.161,0,20.932l8.656,8.654c2.795,2.795,6.512,4.335,10.465,4.335c3.953,0,7.669-1.54,10.465-4.335\r\n\t\t\t\tl98.921-98.922c2.984-2.984,6.952-4.627,11.172-4.627s8.188,1.643,11.172,4.627l98.921,98.922\r\n\t\t\t\tc2.795,2.796,6.512,4.336,10.465,4.336s7.67-1.54,10.465-4.336l8.656-8.654c5.77-5.771,5.77-15.162,0-20.932l-17.746-17.744\r\n\t\t\t\tL372.627,362.029z"/>\r\n\t\t</g>\r\n\t</g>\r\n</g>\r\n</svg>',tooltip:!0}),r.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(r,"execute",(()=>t.execute("insertAiImg"))),r}))}}class c extends t.Plugin{static get requires(){return[s]}}const l={AiImg:c}})(),n=n.default})()));